<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset='utf-8'>
  <meta name="viewport"
    content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
  <title>슬라이드</title>

  
</head>


</html>

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>subPage</title>
  <style>



  </style>
</head>
<link rel="stylesheet" href="index.css" />
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Playwrite+HR:wght@100..400&display=swap" rel="stylesheet" />
<link href="guest_book.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript" src="./scripts/utils.js"></script>
<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
  integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<!-- <script type="text/javascript" src="./scripts/utils.js"></script> -->
<script type="module">
  // Firebase SDK 라이브러리 가져오기
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
  import {
    getFirestore,
    doc,
    getDocs,
    collection,
    addDoc,
    updateDoc,
    deleteDoc,
    deleteField,
    query,
    startAt,
    orderBy,
    limit,
  } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

  // Firebase 구성 정보 설정
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyD0oERzI0jnFGWaAR8NaYPkGqGYft-NOfs",
    authDomain: "sparta-test-71931.firebaseapp.com",
    projectId: "sparta-test-71931",
    storageBucket: "sparta-test-71931.appspot.com",
    messagingSenderId: "557999158224",
    appId: "1:557999158224:web:799f97b40ab8e897293fd5",
    measurementId: "G-1QGVSEZ52D",
  };

  // Firebase 인스턴스 초기화
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // const name = $('#name').text();
  const name = '이준'

  let fieldId;
  let pw;

  // 페이지 로딩 후 db 가져옴
  $(window).load(async () => {
    loadGuestBook();
  });


  // 방명록 저장
  $("#addEntry").click(async function () {
    let guest_name = $("#guest-name").val();
    let guest_pw = $("#guest-pw").val();
    let guest_message = $("#guest-message").val();
    let date = getDate();


    if (validInputs()) {
      // await addDoc(collection(db, "guest_book"),doc);
      await addDoc(collection(db, "guest_book"), {
        name: name,
        guest_name: guest_name,
        guest_pw: guest_pw,
        guest_message: guest_message,
        date: date,
      });

      inputClear();
      cardClear();
      loadGuestBook();
    }
  });

  // db 불러오기
  async function loadGuestBook() {
    let docs = await getDocs(
      query(collection(db, "guest_book"), orderBy("date", "desc"))
    );

    createGuestBook(docs, name);
  }


  /************ 방명록 삭제 ******************/
  $(document).on("click", ".deleteBtn", async function () {
    fieldId = $(this).attr("id");
  });

  $('#validPassword').click(async function () {
    const inputPw = $('#inputPw').val();
    let docs = await getDocs(collection(db, "guest_book"), doc);

    if (checkPassword(inputPw, docs, fieldId)) {
      await deleteDoc(doc(db, "guest_book", fieldId));
      cardClear();
      loadGuestBook();
      closeModal();
      window.alert('지워짐')
      // $('#passwordModal').modal('hide');
    } else {
      window.alert('틀림')
    }
  })
</script>

<body>



  <div id="header"></div>

  <div class="header">
    <h2>INTRODUCE OUR TEAM</h2>
    <div class="memberIntroduce">
      <div class="slide-container">
        <div class="slide-album">
          <div class="slide-images" style="transform: translateX(-438px); transition: transform 0.5s ease-out 0s;">
            <img src="src/gallery_jl01.jpg" alt="img">
            <img src="src/gallery_jl04.jpg" alt="img">

          </div>
         
        </div>
      </div>
      <div class="image">
        <img src="./img/KakaoTalk_20240701_154322656.jpg" alt="프로필사진" />

      </div>

      <div class="introBox">
        <div class="box box1">
          <p>이준 <br>
          JUN LEE 준리 <br>
          별명:춘리
        </p>
        </div>
        <div class="box box2">
          <p>INTRODUCE MYSELF, ENFP <br>
          여행 좋아합니다 </p>
        </div>
        <div class="box box3">
          <p>3살강아지주인<br>
          이름:이만두,롱다리푸들<br>
          강아지마저 ENFP <br>
          토이푸들이랬는데 아직도크는중<br>
          bgm으로 짖는 소리 날 수 있음
    </p>
        </div>
        <div class="box box4">
          <p>꾸준히 노력합니다 <br>
            바리스타에서 <br>핸드폰수리에서
            코딩으로 <br>
            느리게 배우지만 습득하면빨라짐 
        

          </p>
        </div>
        <div class="box box5">
          <p>LINK</p>
          <a href="https://github.com/junjun932"><ion-icon name="logo-github"></ion-icon></a>
          <a href="https://wangmandoo1.tistory.com/"><ion-icon name="logo-venmo"></ion-icon></a>
        </div>
      </div>
    </div>
  </div>
  <!--header-->

  <div class="section">
    <div class="beforeButton">
      <a href="subPage_br.html">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
          style="fill: rgba(0, 0, 0, 1);transform: msFilter;">
          <path d="m4.431 12.822 13 9A1 1 0 0 0 19 21V3a1 1 0 0 0-1.569-.823l-13 9a1.003 1.003 0 0 0 0 1.645z"></path>
        </svg>
      </a>
    </div>
    <div class="afterButton">
      <p class="showP">want to know other member</p>
      <a href="subPage_jm.html">
        <svg id="after" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
          style="fill: rgba(0, 0, 0, 1);transform: msFilter;">
          <path
            d="M5.536 21.886a1.004 1.004 0 0 0 1.033-.064l13-9a1 1 0 0 0 0-1.644l-13-9A1 1 0 0 0 5 3v18a1 1 0 0 0 .536.886z">
          </path>
        </svg>
      </a>
    </div>
  </div>

  <div id="guestbook">
    <h2>방명록</h2>
    <div class="input-container">
      <div class="input-name-pw-container">
        <input type="text" class="input-name" id="guest-name" placeholder="이름" />
        <input type="password" class="input-pw" id="guest-pw" placeholder="비밀번호" maxlength="4" />
        <div class="input-submit-container">
          <!-- <button onclick="addEntry()">등록</button> -->
          <button id="addEntry">등록</button>
        </div>
      </div>
      <div class="input-message-container">
        <textarea type="text" class="input-message" id="guest-message" placeholder="내용을 입력하세요"></textarea>
      </div>
    </div>
    <div class="guestbook-entries" id="guestbook-entries">
      <!-- Guestbook entries will be added here -->
    </div>
  </div>

  <!-- 비밀번호 모달 -->
  <div class="modal fade" id="passwordModal" tabindex="-1" aria-labelledby="exampleModalLabel" style="display: none;"
    aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-2" id="exampleModalLabel">비밀번호</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form>
            <div class="mb-3">
              <label for="recipient-name" class="col-form-label">Recipient:</label>
              <input type="password" class="form-control" id="inputPw" maxlength="4">
            </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" onclick="closeModal()">닫기</button>
          <button type="button" class="btn btn-primary" id="validPassword">확인</button>
        </div>
      </div>
    </div>
  </div>
  <script src="script.js"></script>
  <script src="headerFooter.js"></script>
</body>

</html>